parameters:
  artifactsRoot: ''
  deploymentMode: 'Incremental'
  environmentName: ''
  storageName: ''
  serviceConnection: ''
  resourceGroupLocation: 'Australia Southeast'
  resourceGroup: ''
  csmFileLink: ''
  csmParametersFileLink: ''
  subscriptionId: ''

steps:
  - task: Kubernetes@1
    displayName: kubectl apply
    inputs:
      connectionType: Kubernetes Service Connection
      kubernetesServiceEndpoint: techappaksserviceconnection
      azureSubscriptionEndpointForSecrets: techappserviceconnection
      azureContainerRegistry: techappacr.azurecr.io
      secretName: acrsecret
      command: apply
      useConfigurationFile: true
      configuration: '$(Pipeline.Workspace)/drop/templates/manifest.yaml'